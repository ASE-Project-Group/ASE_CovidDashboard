version: "3.9"

services:
    database:
        image: postgres
        environment:
          - POSTGRES_USER=aseuser
          - POSTGRES_PASSWORD=asepassword
          - POSTGRES_DB=covidDatabase
    spring:
        image: manuel57/covid-19-dashboard-backend
        build: ase
        ports:
        -   "8080:8080"
        environment:
            - DB_HOST=database
        depends_on:
            - database
        restart: on-failure
    frontend:
        image: manuel57/covid-19-dashboard-frontend
        build: frontend
        environment:
            - BACKEND_API_URL=http://host.docker.internal:8080
        ports:
            - '80:80'
        depends_on:
            -   spring